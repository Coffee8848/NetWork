# VirtualBox网络模式对比笔记

## 2. 桥接模式 (Bridged Networking)

### 概念

桥接模式通过主机的物理网卡，将虚拟机直接连接到外部物理网络中。虚拟机会获得与主机处于同一网段的IP地址，就像网络中的另一台独立的物理计算机。

### 工作原理

- 虚拟机的网络适配器直接连接到主机的物理网卡
- 虚拟机从网络的DHCP服务器获取IP地址，或手动配置同网段IP
- 数据通过物理网卡直接进出，主机仅作为中转站

### 特点

- 虚拟机拥有独立IP，与主机平等
- 可以与局域网内所有设备直接通信
- 局域网内其他设备可以直接访问虚拟机
- 完全暴露在外部网络中

### 适用场景

- 虚拟机需要作为服务器被外部访问
- 虚拟机需要与局域网内其他设备直接通信
- 需要模拟真实网络环境

## 3. 仅主机模式 (Host-Only Networking)

### 概念

仅主机模式创建一个封闭的虚拟网络，只有主机和虚拟机可以互相通信，虚拟机默认无法访问外部网络。

### 工作原理

- VirtualBox在主机上创建一个虚拟网卡
- 虚拟机连接到这个虚拟网卡构成内部网络
- 默认情况下没有DHCP服务，需手动配置IP或启用VirtualBox的DHCP服务

### 特点

- 虚拟机只能与主机通信
- 虚拟机默认无法访问外部网络
- 外部网络无法直接访问虚拟机
- 高度隔离和安全

### 适用场景

- 需要在隔离环境中测试软件
- 创建主机与虚拟机间的私有网络
- 多虚拟机之间需要互相通信但不需要外网连接
- 安全性要求高的开发测试环境

## 4. NAT模式 (Network Address Translation)

### 概念

NAT模式让虚拟机通过主机的网络连接访问外部网络，共享主机的网络连接，但虚拟机对外不可见。

### 工作原理

- VirtualBox创建一个虚拟NAT设备
- 虚拟机连接到NAT设备，由其分配私有IP地址
- 虚拟机对外的请求由NAT设备转换后通过主机网卡发出
- 外部响应返回给NAT设备，再转发给虚拟机

### 特点

- 虚拟机可以访问外部网络
- 外部网络默认无法直接访问虚拟机
- 可以通过端口转发使外部访问虚拟机的特定服务
- 多个虚拟机可共享主机网络连接
- 虚拟机间默认不能直接通信

### 适用场景

- 只需虚拟机能上网而不需被外部访问
- 主机网络环境复杂（如公司网络、酒店Wi-Fi）
- 资源有限，无法为每个虚拟机分配独立IP
- 需要同时运行多个相同系统且配置相似的虚拟机

## 5. 三种模式比较


| 特性               | 桥接模式 | 仅主机模式  | NAT模式     |
| ------------------ | -------- | ----------- | ----------- |
| 虚拟机→主机       | ✓       | ✓          | ✓          |
| 主机→虚拟机       | ✓       | ✓          | 需端口转发  |
| 虚拟机→互联网     | ✓       | ✗ (默认)   | ✓          |
| 互联网→虚拟机     | ✓       | ✗          | 需端口转发  |
| 虚拟机→局域网设备 | ✓       | ✗          | ✗          |
| 局域网设备→虚拟机 | ✓       | ✗          | ✗          |
| 虚拟机间通信       | ✓       | ✓ (同网络) | ✗ (默认)   |
| 安全性             | 低       | 高          | 中          |
| 配置复杂度         | 中       | 低          | 低          |
| IP地址来源         | 物理网络 | 虚拟网络    | 虚拟NAT网络 |

## 6. 使用建议

- **桥接模式**：当需要虚拟机作为独立服务器，被外部网络访问时使用
- **仅主机模式**：当需要安全的隔离环境或仅需主机与虚拟机通信时使用
- **NAT模式**：当只需虚拟机访问外网，但不需被外部直接访问时使用

不同场景可灵活组合使用不同网络模式，甚至同一虚拟机可配置多个网卡使用不同模式。
